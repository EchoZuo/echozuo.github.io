<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Echo Zuo&#39;s Pit</title>
  
  <subtitle>古尔班通古特。</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-07-23T16:26:23.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Echo Zuo</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>使用Google GCP搭建专属免费VPS</title>
    <link href="http://yoursite.com/2019/07/14/%E4%BD%BF%E7%94%A8Google%20GCP%E6%90%AD%E5%BB%BA%E4%B8%93%E5%B1%9E%E5%85%8D%E8%B4%B9VPS/"/>
    <id>http://yoursite.com/2019/07/14/使用Google GCP搭建专属免费VPS/</id>
    <published>2019-07-13T16:00:00.000Z</published>
    <updated>2019-07-23T16:26:23.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="郑重申明：本文用于记录、总结、分享云服务器自行搭建VPS的过程及方法。如将其作用于违反法律法规的事情，与本人无关。请遵守当地法律法规。"><a href="#郑重申明：本文用于记录、总结、分享云服务器自行搭建VPS的过程及方法。如将其作用于违反法律法规的事情，与本人无关。请遵守当地法律法规。" class="headerlink" title="郑重申明：本文用于记录、总结、分享云服务器自行搭建VPS的过程及方法。如将其作用于违反法律法规的事情，与本人无关。请遵守当地法律法规。"></a>郑重申明：本文用于记录、总结、分享云服务器自行搭建VPS的过程及方法。如将其作用于违反法律法规的事情，与本人无关。请遵守当地法律法规。</h3><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><h4 id="感谢谷歌提供的GCP服务（Google-Cloud-Platform，谷歌云平台服务），首次注册激活GCP，你会获享12个月试用期和-300-赠金，是不是免费？"><a href="#感谢谷歌提供的GCP服务（Google-Cloud-Platform，谷歌云平台服务），首次注册激活GCP，你会获享12个月试用期和-300-赠金，是不是免费？" class="headerlink" title="感谢谷歌提供的GCP服务（Google Cloud Platform，谷歌云平台服务），首次注册激活GCP，你会获享12个月试用期和$300 赠金，是不是免费？"></a>感谢谷歌提供的GCP服务（<a href="https://cloud.google.com" target="_blank" rel="noopener">Google Cloud Platform，谷歌云平台服务</a>），首次注册激活GCP，你会获享12个月试用期和$300 赠金，是不是免费？</h4><blockquote><p>请注意：教程很详细，图很多！</p></blockquote><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/111.png?x-oss-process=style/watermark_1" alt="image.png"></p><h3 id="首先你需要"><a href="#首先你需要" class="headerlink" title="首先你需要"></a>首先你需要</h3><ul><li><h5 id="谷歌账号以及能访问谷歌站点的一台电脑（首先你要能登录谷歌GCP）"><a href="#谷歌账号以及能访问谷歌站点的一台电脑（首先你要能登录谷歌GCP）" class="headerlink" title="谷歌账号以及能访问谷歌站点的一台电脑（首先你要能登录谷歌GCP）"></a>谷歌账号以及能访问谷歌站点的一台电脑（首先你要能登录谷歌GCP）</h5></li><li><h5 id="外币卡（VISA、Mastercard、AE）（实测招行VISA全币种卡可以）"><a href="#外币卡（VISA、Mastercard、AE）（实测招行VISA全币种卡可以）" class="headerlink" title="外币卡（VISA、Mastercard、AE）（实测招行VISA全币种卡可以）"></a>外币卡（VISA、Mastercard、AE）（实测招行VISA全币种卡可以）</h5></li></ul><h2 id="开始搭建"><a href="#开始搭建" class="headerlink" title="开始搭建"></a>开始搭建</h2><h3 id="1-登录-Google-Cloud-Platform-激活账户填写相关信息"><a href="#1-登录-Google-Cloud-Platform-激活账户填写相关信息" class="headerlink" title="1. 登录 Google Cloud Platform 激活账户填写相关信息"></a>1. 登录 <a href="https://cloud.google.com/" target="_blank" rel="noopener">Google Cloud Platform</a> 激活账户填写相关信息</h3><ul><li><h5 id="右上角点击language修改语言为中文简体（如果你的英文很棒那么可以不用改）"><a href="#右上角点击language修改语言为中文简体（如果你的英文很棒那么可以不用改）" class="headerlink" title="右上角点击language修改语言为中文简体（如果你的英文很棒那么可以不用改）"></a>右上角点击language修改语言为中文简体（如果你的英文很棒那么可以不用改）</h5></li><li><h5 id="点击右上角免费试用"><a href="#点击右上角免费试用" class="headerlink" title="点击右上角免费试用"></a>点击右上角免费试用</h5></li><li><h5 id="国家-地区可以选择香港，点击继续，登录谷歌账户"><a href="#国家-地区可以选择香港，点击继续，登录谷歌账户" class="headerlink" title="国家/地区可以选择香港，点击继续，登录谷歌账户"></a>国家/地区可以选择香港，点击继续，登录谷歌账户</h5></li></ul><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/1.png?x-oss-process=style/watermark_1" alt="image.png"></p><ul><li><h5 id="填写个人信息和信用卡信息"><a href="#填写个人信息和信用卡信息" class="headerlink" title="填写个人信息和信用卡信息"></a>填写个人信息和信用卡信息</h5><blockquote><p>账户类型记得选个人</p><p>信用卡必须填写。填写之后点击开始免费使用。</p><p>谷歌声称“我们要求您提供信用卡信息是为了确认您不是机器人。除非您手动升级为付费帐号，否则我们不会向您收费。”具体信息可以参考：<a href="https://www.youtube.com/watch?v=kJHKsOywfxE" target="_blank" rel="noopener">https://www.youtube.com/watch?v=kJHKsOywfxE</a></p></blockquote></li></ul><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/2.png?x-oss-process=style/watermark_1" alt="image.png"></p><ul><li>激活成功之后你会看到如下界面，并且会有提示$300美金和12个月免费试用期。</li></ul><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/3.png?x-oss-process=style/watermark_1" alt="image.png"></p><h3 id="2-创建VM虚拟机实例"><a href="#2-创建VM虚拟机实例" class="headerlink" title="2. 创建VM虚拟机实例"></a>2. 创建VM虚拟机实例</h3><ul><li><h5 id="左侧导航栏选择-计算-—-gt-Computer-Engine-—-gt-VM实例"><a href="#左侧导航栏选择-计算-—-gt-Computer-Engine-—-gt-VM实例" class="headerlink" title="左侧导航栏选择 计算 —&gt; Computer Engine —&gt; VM实例"></a>左侧导航栏选择 计算 —&gt; Computer Engine —&gt; VM实例</h5></li></ul><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/4.png?x-oss-process=style/watermark_1" alt="image.png"></p><ul><li>等待 Compute Engine 启用完成后，点击创建，开始自定义实例配置</li></ul><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/5.png?x-oss-process=style/watermark_1" alt="image.png"></p><pre><code>- 填写 名称- 选择 区域 及 地区（日本站点距离近，响应速度快）- 调整一下 内核 及 内存，选择最低共享配置即可满足- 更改 启动磁盘 为 Ubuntu 18.04 LTS</code></pre><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/6.png?x-oss-process=style/watermark_1" alt="image.png"></p><pre><code>- 防火墙勾选 允许 HTTP 流量 允许 HTTPS 流量- 点击 创建，创建完成如下图。</code></pre><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/7.png?x-oss-process=style/watermark_1" alt="image.png"></p><h3 id="3-设置防火墙规则"><a href="#3-设置防火墙规则" class="headerlink" title="3. 设置防火墙规则"></a>3. 设置防火墙规则</h3><ul><li><h5 id="左侧菜单栏-—-gt-网络-—-gt-VPC网络-—-gt-防火墙规则"><a href="#左侧菜单栏-—-gt-网络-—-gt-VPC网络-—-gt-防火墙规则" class="headerlink" title="左侧菜单栏 —&gt; 网络 —&gt; VPC网络 —&gt; 防火墙规则"></a>左侧菜单栏 —&gt; 网络 —&gt; VPC网络 —&gt; 防火墙规则</h5></li></ul><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/8.png?x-oss-process=style/watermark_1" alt="image.png"></p><ul><li><h5 id="点击创建防火墙规则"><a href="#点击创建防火墙规则" class="headerlink" title="点击创建防火墙规则"></a>点击创建防火墙规则</h5></li></ul><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/9.png?x-oss-process=style/watermark_1" alt="image.png"></p><pre><code>- 名称 按规则自定义- 目标 选择  网络中的所有实例</code></pre><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/10.png?x-oss-process=style/watermark_1" alt="image.png"></p><pre><code>- 来源ip地址范围 0.0.0.0/0- 协议和端口 勾选 UDP 填写 500,4500，勾选 其他协议 填写 esp- 点击 创建，创建成功，如下图</code></pre><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/12.png?x-oss-process=style/watermark_1" alt="image.png"></p><h3 id="4-配置VPC网络"><a href="#4-配置VPC网络" class="headerlink" title="4. 配置VPC网络"></a>4. 配置VPC网络</h3><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/13.png?x-oss-process=style/watermark_1" alt="image.png"></p><pre><code>- 左侧菜单栏 ---&gt; 网络 ---&gt; VPC网络 ---&gt; default</code></pre><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/14.png?x-oss-process=style/watermark_1" alt="image.png"></p><pre><code>- 点击修改</code></pre><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/15.png?x-oss-process=style/watermark_1" alt="image.png"></p><pre><code>- 子网创建模式 选择 自动- 动态路由模式 选择 全局- 点击保存即可</code></pre><h3 id="5-设置-负载平衡"><a href="#5-设置-负载平衡" class="headerlink" title="5. 设置 负载平衡"></a>5. 设置 负载平衡</h3><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/16.png?x-oss-process=style/watermark_1" alt="image.png"></p><ul><li><h5 id="左侧菜单栏-—-gt-网络-—-gt-负载平衡"><a href="#左侧菜单栏-—-gt-网络-—-gt-负载平衡" class="headerlink" title="左侧菜单栏 —&gt; 网络 —&gt; 负载平衡"></a>左侧菜单栏 —&gt; 网络 —&gt; 负载平衡</h5></li><li><h5 id="点击创建负载平衡"><a href="#点击创建负载平衡" class="headerlink" title="点击创建负载平衡"></a>点击创建负载平衡</h5></li><li><h5 id="直接点击继续"><a href="#直接点击继续" class="headerlink" title="直接点击继续"></a>直接点击继续</h5></li></ul><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/17.png?x-oss-process=style/watermark_1" alt="image.png"></p><pre><code>- 名称 按规则自定义填写- 选择 区域- 选择第一步所创建的VM实例- 点击前端配置</code></pre><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/18.png?x-oss-process=style/watermark_1" alt="image.png"></p><pre><code>- 名称 按规则自定义填写- 端口 填写500-4500- 点击 完成 - 点击 创建，创建完成如下</code></pre><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/19.png?x-oss-process=style/watermark_1" alt="image.png"></p><h3 id="6-登录服务器"><a href="#6-登录服务器" class="headerlink" title="6. 登录服务器"></a>6. 登录服务器</h3><ul><li><h5 id="导航菜单-→-Compute-Engine-→-VM实例"><a href="#导航菜单-→-Compute-Engine-→-VM实例" class="headerlink" title="导航菜单 → Compute Engine → VM实例"></a>导航菜单 → Compute Engine → VM实例</h5></li></ul><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/20.png?x-oss-process=style/watermark_1" alt="image.png"></p><ul><li><h5 id="点击-SSH，会进入到远程终端页面"><a href="#点击-SSH，会进入到远程终端页面" class="headerlink" title="点击 SSH，会进入到远程终端页面"></a>点击 SSH，会进入到远程终端页面</h5></li></ul><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/21.png?x-oss-process=style/watermark_1" alt="image.png"></p><h3 id="7-开始部署服务"><a href="#7-开始部署服务" class="headerlink" title="7. 开始部署服务"></a>7. 开始部署服务</h3><ul><li><h5 id="执行以下命令"><a href="#执行以下命令" class="headerlink" title="执行以下命令"></a>执行以下命令</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update &amp;&amp; apt-get dist-upgrade</span><br></pre></td></tr></table></figure></li></ul><h6 id="控制台输出"><a href="#控制台输出" class="headerlink" title="控制台输出"></a>控制台输出</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">The programs included with the Ubuntu system are free software;</span><br><span class="line">the exact distribution terms for each program are described in the</span><br><span class="line">individual files in /usr/share/doc/*/copyright.</span><br><span class="line">Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by</span><br><span class="line">applicable law.</span><br><span class="line">zuoqianheng@instance-1:~$ sudo apt-get update &amp;&amp; apt-get dist-upgrade</span><br><span class="line">Hit:1 http://asia-northeast1.gce.archive.ubuntu.com/ubuntu bionic InRelease</span><br><span class="line">Get:2 http://asia-northeast1.gce.archive.ubuntu.com/ubuntu bionic-updates InRelease [88.7 kB]               </span><br><span class="line">Get:3 http://asia-northeast1.gce.archive.ubuntu.com/ubuntu bionic-backports InRelease [74.6 kB]             </span><br><span class="line">Get:4 http://asia-northeast1.gce.archive.ubuntu.com/ubuntu bionic/universe amd64 Packages [8570 kB]               </span><br><span class="line">Get:5 http://archive.canonical.com/ubuntu bionic InRelease [10.2 kB]                                              </span><br><span class="line">Get:6 http://security.ubuntu.com/ubuntu bionic-security InRelease [88.7 kB]                                       </span><br><span class="line">Get:7 http://asia-northeast1.gce.archive.ubuntu.com/ubuntu bionic/universe Translation-en [4941 kB]</span><br><span class="line">Get:8 http://asia-northeast1.gce.archive.ubuntu.com/ubuntu bionic/multiverse amd64 Packages [151 kB]              </span><br><span class="line">Get:9 http://asia-northeast1.gce.archive.ubuntu.com/ubuntu bionic/multiverse Translation-en [108 kB]        </span><br><span class="line">Get:10 http://asia-northeast1.gce.archive.ubuntu.com/ubuntu bionic-updates/main amd64 Packages [682 kB]           </span><br><span class="line">Get:11 http://asia-northeast1.gce.archive.ubuntu.com/ubuntu bionic-updates/main Translation-en [251 kB]      </span><br><span class="line">Get:12 http://asia-northeast1.gce.archive.ubuntu.com/ubuntu bionic-updates/universe amd64 Packages [970 kB]       </span><br><span class="line">Get:13 http://asia-northeast1.gce.archive.ubuntu.com/ubuntu bionic-updates/universe Translation-en [293 kB]  </span><br><span class="line">Get:14 http://asia-northeast1.gce.archive.ubuntu.com/ubuntu bionic-updates/multiverse amd64 Packages [6640 B]     </span><br><span class="line">Get:15 http://asia-northeast1.gce.archive.ubuntu.com/ubuntu bionic-updates/multiverse Translation-en [3556 B]</span><br><span class="line">Get:16 http://asia-northeast1.gce.archive.ubuntu.com/ubuntu bionic-backports/main amd64 Packages [2512 B]         </span><br><span class="line">Get:17 http://asia-northeast1.gce.archive.ubuntu.com/ubuntu bionic-backports/main Translation-en [1644 B]    </span><br><span class="line">Get:18 http://asia-northeast1.gce.archive.ubuntu.com/ubuntu bionic-backports/universe amd64 Packages [3736 B]     </span><br><span class="line">Get:19 http://asia-northeast1.gce.archive.ubuntu.com/ubuntu bionic-backports/universe Translation-en [1696 B]</span><br><span class="line">Get:20 http://archive.canonical.com/ubuntu bionic/partner amd64 Packages [2320 B]                                 </span><br><span class="line">Get:21 http://archive.canonical.com/ubuntu bionic/partner Translation-en [1276 B]</span><br><span class="line">Get:22 http://security.ubuntu.com/ubuntu bionic-security/main amd64 Packages [450 kB]</span><br><span class="line">Get:23 http://security.ubuntu.com/ubuntu bionic-security/main Translation-en [156 kB]</span><br><span class="line">Get:24 http://security.ubuntu.com/ubuntu bionic-security/universe amd64 Packages [570 kB]</span><br><span class="line">Get:25 http://security.ubuntu.com/ubuntu bionic-security/universe Translation-en [185 kB]</span><br><span class="line">Get:26 http://security.ubuntu.com/ubuntu bionic-security/multiverse amd64 Packages [4008 B]</span><br><span class="line">Get:27 http://security.ubuntu.com/ubuntu bionic-security/multiverse Translation-en [2060 B]</span><br><span class="line">Fetched 17.6 MB in 4s (4193 kB/s)                     </span><br><span class="line">Reading package lists... Done</span><br><span class="line">E: Could not open lock file /var/lib/dpkg/lock-frontend - open (13: Permission denied)</span><br><span class="line">E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), are you root?</span><br><span class="line">zuoqianheng@instance-1:~$</span><br></pre></td></tr></table></figure><ul><li><h5 id="命令行一步部署VPN服务"><a href="#命令行一步部署VPN服务" class="headerlink" title="命令行一步部署VPN服务"></a>命令行一步部署VPN服务</h5></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://git.io/vpnsetup -O vpnsetup.sh &amp;&amp; sudo \</span><br><span class="line">VPN_IPSEC_PSK=&apos;预分享密钥&apos; \</span><br><span class="line">VPN_USER=&apos;用户名&apos; \</span><br><span class="line">VPN_PASSWORD=&apos;密码&apos; sh vpnsetup.sh</span><br></pre></td></tr></table></figure><pre><code>记得修改命令中的个人信息部分。一个安全的 IPsec PSK 应该至少包含 20 个随机字符。</code></pre><h6 id="需要等待大概5-10分钟后，控制台输出"><a href="#需要等待大概5-10分钟后，控制台输出" class="headerlink" title="需要等待大概5-10分钟后，控制台输出"></a>需要等待大概5-10分钟后，控制台输出</h6><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-07-14/2.png?x-oss-process=style/watermark_1" alt="image.png"></p><blockquote><p>详细部署VPN服务教程可参考：<a href="https://github.com/hwdsl2/setup-ipsec-vpn/blob/master/README-zh.md#重要提示" target="_blank" rel="noopener">IPsec VPN 服务器一键安装脚本</a></p></blockquote><ul><li><h5 id="看到上图，我们的的VPN就算搭建成功了"><a href="#看到上图，我们的的VPN就算搭建成功了" class="headerlink" title="看到上图，我们的的VPN就算搭建成功了"></a>看到上图，我们的的VPN就算搭建成功了</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">================================================</span><br><span class="line">IPsec VPN server is now ready for use!</span><br><span class="line">Connect to your new VPN with these details:</span><br><span class="line">Server IP: 34.*******</span><br><span class="line">IPsec PSK: ********************</span><br><span class="line">Username: ******************</span><br><span class="line">Password: ***************</span><br><span class="line">Write these down. You&apos;ll need them to connect!</span><br><span class="line">Important notes:   https://git.io/vpnnotes</span><br><span class="line">Setup VPN clients: https://git.io/vpnclients</span><br><span class="line">================================================</span><br><span class="line">zuoqianheng@instance-1:~$</span><br></pre></td></tr></table></figure></li></ul><h3 id="8-如何连接？"><a href="#8-如何连接？" class="headerlink" title="8. 如何连接？"></a>8. 如何连接？</h3><ul><li>Mac、iOS设置可以直接在网络设置中找到VPN，添加对应的服务器、用户名、密码等数据即可访问。Windows 用户可以使用免费的 <a href="https://www.shrew.net/download/vpn" target="_blank" rel="noopener">Shrew Soft 客户端</a>。可以参考这里：<a href="https://github.com/hwdsl2/setup-ipsec-vpn/blob/master/docs/clients-xauth-zh.md" target="_blank" rel="noopener">配置 IPsec/XAuth VPN 客户端</a></li><li>如果无法连接,请首先检查是否输入了正确的 VPN 登录凭证。</li></ul><h2 id="Info"><a href="#Info" class="headerlink" title="Info"></a>Info</h2><ul><li>Github: <a href="https://github.com/EchoZuo" target="_blank" rel="noopener">https://github.com/EchoZuo</a></li><li>jianshu: <a href="https://www.jianshu.com/u/3390ce71084e" target="_blank" rel="noopener">https://www.jianshu.com/u/3390ce71084e</a></li><li>CSDN: <a href="https://blog.csdn.net/zuoqianheng" target="_blank" rel="noopener">https://blog.csdn.net/zuoqianheng</a></li><li>Email: <a href="mailto:zuoqianheng@foxmail.com" target="_blank" rel="noopener">zuoqianheng@foxmail.com</a></li><li>Telegram: @echozuo</li></ul><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul><li><a href="https://cloud.google.com/" target="_blank" rel="noopener">Google Cloud</a></li><li><a href="https://www.youtube.com/watch?v=kJHKsOywfxE" target="_blank" rel="noopener">【BIG东东】关于谷歌云的结算和防火墙规则端口开通</a></li><li><a href="https://www.youtube.com/watch?v=nfIyLB3OeBU" target="_blank" rel="noopener">如何利用谷歌云搭建12个月免费VPN教程，google2018免费VPN送300美金</a></li><li><a href="https://medium.com/@YasuoYuHao/google-cloud-platform-搭建個人vpn-358ccdbeca40" target="_blank" rel="noopener">Google Cloud Platform 搭建個人VPN</a></li><li><a href="https://elephantnose.github.io/2018/09/24/10分钟教你用%20Google%20Cloud%20Platform%20搭建自己的VPN/#防火墙规则" target="_blank" rel="noopener">10分钟教你用 Google Cloud Platform 搭建自己的VPN</a></li><li><a href="https://github.com/hwdsl2" target="_blank" rel="noopener">https://github.com/hwdsl2</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;郑重申明：本文用于记录、总结、分享云服务器自行搭建VPS的过程及方法。如将其作用于违反法律法规的事情，与本人无关。请遵守当地法律法规。&quot;&gt;&lt;a href=&quot;#郑重申明：本文用于记录、总结、分享云服务器自行搭建VPS的过程及方法。如将其作用于违反法律法规的事情，与本
      
    
    </summary>
    
      <category term="Server" scheme="http://yoursite.com/categories/Server/"/>
    
    
      <category term="Google" scheme="http://yoursite.com/tags/Google/"/>
    
      <category term="谷歌" scheme="http://yoursite.com/tags/%E8%B0%B7%E6%AD%8C/"/>
    
      <category term="VPS" scheme="http://yoursite.com/tags/VPS/"/>
    
  </entry>
  
  <entry>
    <title>Mac更新系统后 删除文件后可用空间还变少了？</title>
    <link href="http://yoursite.com/2019/06/07/%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E5%90%8E%E5%8F%AF%E7%94%A8%E7%A9%BA%E9%97%B4%E8%BF%98%E5%8F%98%E5%B0%91%E4%BA%86%EF%BC%9F/"/>
    <id>http://yoursite.com/2019/06/07/删除文件后可用空间还变少了？/</id>
    <published>2019-06-07T10:37:47.000Z</published>
    <updated>2019-07-23T16:17:10.000Z</updated>
    
    <content type="html"><![CDATA[<h5 id="写在最前面：此教程仅针对装有macOS-10-15-Catalina-Beta系统的用户，且开启了TimeMachine的用户有效。如果不满足以上任何一个条件的用户就可以关闭网页了。"><a href="#写在最前面：此教程仅针对装有macOS-10-15-Catalina-Beta系统的用户，且开启了TimeMachine的用户有效。如果不满足以上任何一个条件的用户就可以关闭网页了。" class="headerlink" title="写在最前面：此教程仅针对装有macOS 10.15 Catalina Beta系统的用户，且开启了TimeMachine的用户有效。如果不满足以上任何一个条件的用户就可以关闭网页了。"></a>写在最前面：此教程仅针对装有macOS 10.15 Catalina Beta系统的用户，且开启了TimeMachine的用户有效。如果不满足以上任何一个条件的用户就可以关闭网页了。</h5><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-06-07/1.png?x-oss-process=style/watermark_1" alt="1.png"></p><h5 id="WWDC19之后升级给自己闲置的MacBookPro2015款升级了10-15beta系统，开开心心升级之后，却遇到了一个十分诡异的问题。"><a href="#WWDC19之后升级给自己闲置的MacBookPro2015款升级了10-15beta系统，开开心心升级之后，却遇到了一个十分诡异的问题。" class="headerlink" title="WWDC19之后升级给自己闲置的MacBookPro2015款升级了10.15beta系统，开开心心升级之后，却遇到了一个十分诡异的问题。"></a>WWDC19之后升级给自己闲置的MacBookPro2015款升级了10.15beta系统，开开心心升级之后，却遇到了一个十分诡异的问题。</h5><h5 id="256GB的电脑硬盘空间有些吃紧（移动开发工程师，电脑和2T的移动硬盘都已经塞的满满的）本来就是闲置的Mac，为了再装一个beta版Xcode，就删了很多暂时闲置不用的软件和资料，不过令我十分不解和诡异的是，原本装完系统后，有17G左右剩余，竟然越删空间越小（如下图），甚至当我删除了正式版本Xcode和一堆文件（近20GB）之后，Mac存储空间竟然只剩下14GB左右（忘记截图）。"><a href="#256GB的电脑硬盘空间有些吃紧（移动开发工程师，电脑和2T的移动硬盘都已经塞的满满的）本来就是闲置的Mac，为了再装一个beta版Xcode，就删了很多暂时闲置不用的软件和资料，不过令我十分不解和诡异的是，原本装完系统后，有17G左右剩余，竟然越删空间越小（如下图），甚至当我删除了正式版本Xcode和一堆文件（近20GB）之后，Mac存储空间竟然只剩下14GB左右（忘记截图）。" class="headerlink" title="256GB的电脑硬盘空间有些吃紧（移动开发工程师，电脑和2T的移动硬盘都已经塞的满满的）本来就是闲置的Mac，为了再装一个beta版Xcode，就删了很多暂时闲置不用的软件和资料，不过令我十分不解和诡异的是，原本装完系统后，有17G左右剩余，竟然越删空间越小（如下图），甚至当我删除了正式版本Xcode和一堆文件（近20GB）之后，Mac存储空间竟然只剩下14GB左右（忘记截图）。"></a>256GB的电脑硬盘空间有些吃紧（移动开发工程师，电脑和2T的移动硬盘都已经塞的满满的）本来就是闲置的Mac，为了再装一个beta版Xcode，就删了很多暂时闲置不用的软件和资料，不过令我十分不解和诡异的是，原本装完系统后，有17G左右剩余，竟然越删空间越小（如下图），甚至当我删除了正式版本Xcode和一堆文件（近20GB）之后，Mac存储空间竟然只剩下14GB左右（忘记截图）。</h5><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-06-07/2.png?x-oss-process=style/watermark_1" alt="2.png"></p><h3 id="我电脑的剩余容量究竟去哪里了呢？100多GB的其他容量到底是何物？"><a href="#我电脑的剩余容量究竟去哪里了呢？100多GB的其他容量到底是何物？" class="headerlink" title="我电脑的剩余容量究竟去哪里了呢？100多GB的其他容量到底是何物？"></a>我电脑的剩余容量究竟去哪里了呢？100多GB的其他容量到底是何物？</h3><h5 id="按照以往的惯例，我用CleanMyMac、daisydisk等一些列清理软件进行检测清理。对的，你没猜错，于事无补，没有任何效果。"><a href="#按照以往的惯例，我用CleanMyMac、daisydisk等一些列清理软件进行检测清理。对的，你没猜错，于事无补，没有任何效果。" class="headerlink" title="按照以往的惯例，我用CleanMyMac、daisydisk等一些列清理软件进行检测清理。对的，你没猜错，于事无补，没有任何效果。"></a>按照以往的惯例，我用CleanMyMac、daisydisk等一些列清理软件进行检测清理。对的，你没猜错，于事无补，没有任何效果。</h5><h5 id="无数次的关机重启、按住shift进入安全模式，依旧于事无补。"><a href="#无数次的关机重启、按住shift进入安全模式，依旧于事无补。" class="headerlink" title="无数次的关机重启、按住shift进入安全模式，依旧于事无补。"></a>无数次的关机重启、按住shift进入安全模式，依旧于事无补。</h5><h5 id="随后查了了下系统信息以及磁盘信息。竟然发现…"><a href="#随后查了了下系统信息以及磁盘信息。竟然发现…" class="headerlink" title="随后查了了下系统信息以及磁盘信息。竟然发现…"></a>随后查了了下系统信息以及磁盘信息。竟然发现…</h5><h4 id="有两个Macintosh-HD。"><a href="#有两个Macintosh-HD。" class="headerlink" title="有两个Macintosh HD。"></a>有两个Macintosh HD。</h4><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-06-07/3.png?x-oss-process=style/watermark_1" alt="3.png"></p><h5 id="不敢轻易删除某一个Macintosh-HD，在我快要放弃想要备份数据重装系统的时候，意外的谷歌搜到中关村在线的一篇文稿（是的，中关村在线的文稿，谷歌搜出，百度没有）。随后完美解决了问题。"><a href="#不敢轻易删除某一个Macintosh-HD，在我快要放弃想要备份数据重装系统的时候，意外的谷歌搜到中关村在线的一篇文稿（是的，中关村在线的文稿，谷歌搜出，百度没有）。随后完美解决了问题。" class="headerlink" title="不敢轻易删除某一个Macintosh HD，在我快要放弃想要备份数据重装系统的时候，意外的谷歌搜到中关村在线的一篇文稿（是的，中关村在线的文稿，谷歌搜出，百度没有）。随后完美解决了问题。"></a>不敢轻易删除某一个Macintosh HD，在我快要放弃想要备份数据重装系统的时候，意外的谷歌搜到中关村在线的一篇文稿（是的，中关村在线的文稿，谷歌搜出，百度没有）。随后完美解决了问题。</h5><h4 id="原因如下："><a href="#原因如下：" class="headerlink" title="原因如下："></a>原因如下：</h4><h5 id="macOS-10-15-Catalina-Beta再次改了系统分区系统（貌似WWDC19的keynote有看到过），当然也有可能是系统bug，在开启了TimeMachine自动备份的情况下，所有被删除的文件都会以文件快照的形式存储在隐藏分区内，也就是所谓的hidden-space，并且在文件系统中会将这部分空间显示为可清除空间，这些文件快照只有在系统可用空间不足的情况下才会自动删除，我们只需要想办法将这些文件快照强制删除即可。"><a href="#macOS-10-15-Catalina-Beta再次改了系统分区系统（貌似WWDC19的keynote有看到过），当然也有可能是系统bug，在开启了TimeMachine自动备份的情况下，所有被删除的文件都会以文件快照的形式存储在隐藏分区内，也就是所谓的hidden-space，并且在文件系统中会将这部分空间显示为可清除空间，这些文件快照只有在系统可用空间不足的情况下才会自动删除，我们只需要想办法将这些文件快照强制删除即可。" class="headerlink" title="macOS 10.15 Catalina Beta再次改了系统分区系统（貌似WWDC19的keynote有看到过），当然也有可能是系统bug，在开启了TimeMachine自动备份的情况下，所有被删除的文件都会以文件快照的形式存储在隐藏分区内，也就是所谓的hidden space，并且在文件系统中会将这部分空间显示为可清除空间，这些文件快照只有在系统可用空间不足的情况下才会自动删除，我们只需要想办法将这些文件快照强制删除即可。"></a>macOS 10.15 Catalina Beta再次改了系统分区系统（貌似WWDC19的keynote有看到过），当然也有可能是系统bug，在开启了TimeMachine自动备份的情况下，所有被删除的文件都会以文件快照的形式存储在隐藏分区内，也就是所谓的hidden space，并且在文件系统中会将这部分空间显示为可清除空间，这些文件快照只有在系统可用空间不足的情况下才会自动删除，我们只需要想办法将这些文件快照强制删除即可。</h5><h4 id="解决方案："><a href="#解决方案：" class="headerlink" title="解决方案："></a>解决方案：</h4><h5 id="下面就来搬运一下中关村在线上一位叫做“韩立人”分享的办法。"><a href="#下面就来搬运一下中关村在线上一位叫做“韩立人”分享的办法。" class="headerlink" title="下面就来搬运一下中关村在线上一位叫做“韩立人”分享的办法。"></a>下面就来搬运一下中关村在线上一位叫做“韩立人”分享的办法。</h5><h6 id="打开“终端”输入如下代码"><a href="#打开“终端”输入如下代码" class="headerlink" title="打开“终端”输入如下代码"></a>打开“终端”输入如下代码</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echozuo-mbp:~ EchoZuo$ sudo tmutil listlocalsnapshots /</span><br></pre></td></tr></table></figure><h6 id="你可以看到"><a href="#你可以看到" class="headerlink" title="你可以看到"></a>你可以看到</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echozuo-mbp:~ EchoZuo$ sudo tmutil listlocalsnapshots /</span><br><span class="line">Password:</span><br><span class="line">com.apple.TimeMachine.2019-06-06-212733.local</span><br><span class="line">com.apple.TimeMachine.2019-06-07-203209.local</span><br></pre></td></tr></table></figure><h6 id="接下来尝试删除第一个快照文件，后面的文件名需要根据自己的显示来改变"><a href="#接下来尝试删除第一个快照文件，后面的文件名需要根据自己的显示来改变" class="headerlink" title="接下来尝试删除第一个快照文件，后面的文件名需要根据自己的显示来改变"></a>接下来尝试删除第一个快照文件，后面的文件名需要根据自己的显示来改变</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echozuo-mbp:~ EchoZuo$ tmutil deletelocalsnapshots 2017-12-18-093234</span><br></pre></td></tr></table></figure><h6 id="如果出现如下显示，你会发现磁盘空间已经空出来了不少"><a href="#如果出现如下显示，你会发现磁盘空间已经空出来了不少" class="headerlink" title="如果出现如下显示，你会发现磁盘空间已经空出来了不少"></a>如果出现如下显示，你会发现磁盘空间已经空出来了不少</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Deleted local snapshot &apos;2017-12-18-093234&apos;</span><br></pre></td></tr></table></figure><h6 id="可以删除其他所有快照之后，可以再次输入如下命令检测"><a href="#可以删除其他所有快照之后，可以再次输入如下命令检测" class="headerlink" title="可以删除其他所有快照之后，可以再次输入如下命令检测"></a>可以删除其他所有快照之后，可以再次输入如下命令检测</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echozuo-mbp:~ EchoZuo$ sudo tmutil listlocalsnapshots /</span><br></pre></td></tr></table></figure><h5 id="查看存储空间信息，你会发现所有缺失的空间会全部恢复回来"><a href="#查看存储空间信息，你会发现所有缺失的空间会全部恢复回来" class="headerlink" title="查看存储空间信息，你会发现所有缺失的空间会全部恢复回来"></a>查看存储空间信息，你会发现所有缺失的空间会全部恢复回来</h5><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-06-07/4.png?x-oss-process=style/watermark_1" alt="4.png"></p><h6 id="最后特别感谢中关村在线论坛的的帮助。"><a href="#最后特别感谢中关村在线论坛的的帮助。" class="headerlink" title="最后特别感谢中关村在线论坛的的帮助。"></a>最后特别感谢中关村在线论坛的的帮助。</h6><h6 id="参考：http-nb-zol-com-cn-671-6715453-html"><a href="#参考：http-nb-zol-com-cn-671-6715453-html" class="headerlink" title="参考：http://nb.zol.com.cn/671/6715453.html"></a>参考：<a href="http://nb.zol.com.cn/671/6715453.html" target="_blank" rel="noopener">http://nb.zol.com.cn/671/6715453.html</a></h6><hr><h6 id="笔者是一位iOS开发工程师，更是一个果粉，有什么Apple产品使用相关的问题也可以给我留言咨询，帮助大家解答。期待您的关注"><a href="#笔者是一位iOS开发工程师，更是一个果粉，有什么Apple产品使用相关的问题也可以给我留言咨询，帮助大家解答。期待您的关注" class="headerlink" title="笔者是一位iOS开发工程师，更是一个果粉，有什么Apple产品使用相关的问题也可以给我留言咨询，帮助大家解答。期待您的关注~"></a>笔者是一位iOS开发工程师，更是一个果粉，有什么Apple产品使用相关的问题也可以给我留言咨询，帮助大家解答。期待您的关注~</h6>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h5 id=&quot;写在最前面：此教程仅针对装有macOS-10-15-Catalina-Beta系统的用户，且开启了TimeMachine的用户有效。如果不满足以上任何一个条件的用户就可以关闭网页了。&quot;&gt;&lt;a href=&quot;#写在最前面：此教程仅针对装有macOS-10-15-Cat
      
    
    </summary>
    
      <category term="Mac" scheme="http://yoursite.com/categories/Mac/"/>
    
    
      <category term="Mac" scheme="http://yoursite.com/tags/Mac/"/>
    
      <category term="macOS" scheme="http://yoursite.com/tags/macOS/"/>
    
      <category term="存储" scheme="http://yoursite.com/tags/%E5%AD%98%E5%82%A8/"/>
    
      <category term="存储空间" scheme="http://yoursite.com/tags/%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4/"/>
    
  </entry>
  
  <entry>
    <title>Xcode10、Xcode 11 beta 运行libstdc++报错解决方案</title>
    <link href="http://yoursite.com/2019/06/06/libstdc-%E6%8A%A5%E9%94%99-190606/"/>
    <id>http://yoursite.com/2019/06/06/libstdc-报错-190606/</id>
    <published>2019-06-05T16:00:00.000Z</published>
    <updated>2019-08-01T06:08:12.577Z</updated>
    
    <content type="html"><![CDATA[<ul><li>最新处理方案已经更新，可直接跳过到文章结尾查看处理方案！</li><li>新增脚本处理方案。</li></ul><hr><h4 id="报错内容"><a href="#报错内容" class="headerlink" title="报错内容"></a>报错内容</h4><h5 id="library-not-found-for-lstdc-6-0-9"><a href="#library-not-found-for-lstdc-6-0-9" class="headerlink" title="library not found for -lstdc++.6.0.9"></a>library not found for -lstdc++.6.0.9</h5><h5 id="错误截图"><a href="#错误截图" class="headerlink" title="错误截图"></a>错误截图</h5><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-06-06/1.png" alt="1.png"></p><h5 id="这个错误原因是因为iOS12-0之后去掉了lstdc-6-0-9-tbd动态库，如下图搜索便知："><a href="#这个错误原因是因为iOS12-0之后去掉了lstdc-6-0-9-tbd动态库，如下图搜索便知：" class="headerlink" title="这个错误原因是因为iOS12.0之后去掉了lstdc++.6.0.9.tbd动态库，如下图搜索便知："></a>这个错误原因是因为iOS12.0之后去掉了lstdc++.6.0.9.tbd动态库，如下图搜索便知：</h5><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-06-06/2.png" alt="2.png"></p><h5 id="iOS12-0中全部采用libc-代替lstdc-的动态库（如下图），具体原因可以参考："><a href="#iOS12-0中全部采用libc-代替lstdc-的动态库（如下图），具体原因可以参考：" class="headerlink" title="iOS12.0中全部采用libc++代替lstdc++的动态库（如下图），具体原因可以参考："></a>iOS12.0中全部采用libc++代替lstdc++的动态库（如下图），具体原因可以参考：</h5><p><a href="http://www.cnblogs.com/wellbye/archive/2013/04/25/3039203.html" target="_blank" rel="noopener">http://www.cnblogs.com/wellbye/archive/2013/04/25/3039203.html</a><br><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2019-06-06/3.png" alt="3.png"></p><h5 id="因为beta版本Xcode是无法打包上传appstore，所以肯定还是需要Xcode10-Xcode11并行使用，而且现在部分第三方SDK依旧要依赖于lstdc-6-0-9-tbd动态库，如果对代码进行改动或者修改Xcode的配置，可能会造成其他问题，例如在Xcode10上再次运行的时候可能会出现报错等等。"><a href="#因为beta版本Xcode是无法打包上传appstore，所以肯定还是需要Xcode10-Xcode11并行使用，而且现在部分第三方SDK依旧要依赖于lstdc-6-0-9-tbd动态库，如果对代码进行改动或者修改Xcode的配置，可能会造成其他问题，例如在Xcode10上再次运行的时候可能会出现报错等等。" class="headerlink" title="因为beta版本Xcode是无法打包上传appstore，所以肯定还是需要Xcode10+Xcode11并行使用，而且现在部分第三方SDK依旧要依赖于lstdc++.6.0.9.tbd动态库，如果对代码进行改动或者修改Xcode的配置，可能会造成其他问题，例如在Xcode10上再次运行的时候可能会出现报错等等。"></a>因为beta版本Xcode是无法打包上传appstore，所以肯定还是需要Xcode10+Xcode11并行使用，而且现在部分第三方SDK依旧要依赖于lstdc++.6.0.9.tbd动态库，如果对代码进行改动或者修改Xcode的配置，可能会造成其他问题，例如在Xcode10上再次运行的时候可能会出现报错等等。</h5><p>所以最简单解决该问题的方法就是从Xcode10中找到动态库lstdc++.6.0.9.tbd文件copy到Xcode 11 beta下就可以完美解决问题。或者用古老的办法将iOS13的DeviceSupport文件copy到Xcode11.0下也可以完美解决Xcode11.0运行iOS13的问题。</p><hr><h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><h5 id="需要将文件复制到下述四个路径下，才能保证模拟器和真机均好用"><a href="#需要将文件复制到下述四个路径下，才能保证模拟器和真机均好用" class="headerlink" title="需要将文件复制到下述四个路径下，才能保证模拟器和真机均好用"></a>需要将文件复制到下述四个路径下，才能保证模拟器和真机均好用</h5><h5 id="Xcode10下："><a href="#Xcode10下：" class="headerlink" title="Xcode10下："></a>Xcode10下：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/CoreSimulator/Profiles/Runtimes/iOS.simruntime/Contents/Resources/RuntimeRoot/usr/lib/</span><br><span class="line">/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/lib/</span><br><span class="line">/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/lib/</span><br><span class="line">/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/</span><br></pre></td></tr></table></figure><h5 id="Xcode11-beta下："><a href="#Xcode11-beta下：" class="headerlink" title="Xcode11-beta下："></a>Xcode11-beta下：</h5><h5 id="主要是第一条"><a href="#主要是第一条" class="headerlink" title="主要是第一条"></a>主要是第一条<figure class="highlight plain"><figcaption><span>```的路径发生了变更，Xcode10中是```../Developer/Library/..```，而Xcode11中是```.../Library/Developer/...```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">/Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneOS.platform/Library/Developer/CoreSimulator/Profiles/Runtimes/iOS.simruntime/Contents/Resources/RuntimeRoot/usr/lib </span><br><span class="line">/Applications/Xcode-beta.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/lib/</span><br><span class="line">/Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/lib/</span><br><span class="line">/Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/</span><br></pre></td></tr></table></figure></h5><h5 id="为了方便大家，在此提供lstdc-动态库文件下载和DeviceSupport下载-链接："><a href="#为了方便大家，在此提供lstdc-动态库文件下载和DeviceSupport下载-链接：" class="headerlink" title="为了方便大家，在此提供lstdc++动态库文件下载和DeviceSupport下载 链接："></a>为了方便大家，在此提供lstdc++动态库文件下载和DeviceSupport下载 链接：</h5><p><a href="https://pan.baidu.com/s/1M75jMFxAhfcqz-pFk739_Q" target="_blank" rel="noopener">libstdc</a></p><p><a href="https://pan.baidu.com/s/1-tOrJIFpyGGNySsYiKP0AQ" target="_blank" rel="noopener">DeviceSupport(8.0-13.0beta) 所有版本</a></p><p><a href="https://pan.baidu.com/s/1u0_5K8b_jGEMbLJC9Bnpqg" target="_blank" rel="noopener">DeviceSupport：iOS 7.0 - iOS 12 beta1 所有版本</a></p><p><a href="https://pan.baidu.com/s/19V69jLQojVpv-VfHM6Y4zg" target="_blank" rel="noopener">iPhoneOS13.0.sdk</a></p><h5 id="新增脚本处理方案：点击下载"><a href="#新增脚本处理方案：点击下载" class="headerlink" title="新增脚本处理方案：点击下载"></a>新增脚本处理方案：<a href="https://pan.baidu.com/s/1Hc7fGMiv5Ow1CaBYN0JTVA" target="_blank" rel="noopener">点击下载</a></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// install.sh：Xcode10.2.1及其以下</span><br><span class="line">// install-xcode-beta11.sh：Xcode11beta</span><br><span class="line">MacBook-Pro:~ EchoZuo$ cd /Users/EchoZuo/Desktop/xcode\ libstdc </span><br><span class="line">MacBook-Pro:xcode libstdc EchoZuo$ ./install-xcode-beta11.sh</span><br><span class="line">MacBook-Pro:xcode libstdc EchoZuo$ ./install.sh</span><br></pre></td></tr></table></figure><h4 id="Info"><a href="#Info" class="headerlink" title="Info"></a>Info</h4><ul><li>Github: <a href="https://github.com/EchoZuo" target="_blank" rel="noopener">https://github.com/EchoZuo</a></li><li>jianshu: <a href="https://www.jianshu.com/u/3390ce71084e" target="_blank" rel="noopener">https://www.jianshu.com/u/3390ce71084e</a></li><li>CSDN: <a href="https://blog.csdn.net/zuoqianheng" target="_blank" rel="noopener">https://blog.csdn.net/zuoqianheng</a></li><li>Email: <a href="mailto:zuoqianheng@foxmail.com" target="_blank" rel="noopener">zuoqianheng@foxmail.com</a></li><li>Telegram: @echozuo</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;最新处理方案已经更新，可直接跳过到文章结尾查看处理方案！&lt;/li&gt;
&lt;li&gt;新增脚本处理方案。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id=&quot;报错内容&quot;&gt;&lt;a href=&quot;#报错内容&quot; class=&quot;headerlink&quot; title=&quot;报错内容&quot;&gt;&lt;/a&gt;报
      
    
    </summary>
    
      <category term="iOS Dev" scheme="http://yoursite.com/categories/iOS-Dev/"/>
    
      <category term="Xcode" scheme="http://yoursite.com/categories/iOS-Dev/Xcode/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
      <category term="Xcode" scheme="http://yoursite.com/tags/Xcode/"/>
    
      <category term="libstdc++" scheme="http://yoursite.com/tags/libstdc/"/>
    
      <category term="Objective-C" scheme="http://yoursite.com/tags/Objective-C/"/>
    
  </entry>
  
  <entry>
    <title>Mac &amp; iPhone 日历中加入国内法定假期（共享）2019 最新</title>
    <link href="http://yoursite.com/2019/01/02/Mac&amp;iPhone%E6%97%A5%E5%8E%86%E4%B8%AD%E5%8A%A0%E5%85%A5%E5%9B%BD%E5%86%85%E6%B3%95%E5%AE%9A%E5%81%87%E6%9C%9F%EF%BC%88%E5%85%B1%E4%BA%AB%EF%BC%892019%20%E6%9C%80%E6%96%B0/"/>
    <id>http://yoursite.com/2019/01/02/Mac&amp;iPhone日历中加入国内法定假期（共享）2019 最新/</id>
    <published>2019-01-01T16:00:00.000Z</published>
    <updated>2019-07-23T11:13:29.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><h4 id="无数用户钟爱-Apple-自带「提醒事项」和「日历」应用，用来管理日常日程确实很方便，尤其是对于使用苹果三件套的用户来说多设备之间无缝衔接同步更为便利。但也因其功能限制，招人吐槽。例如无法查看国内节假日（老版本系统），无法查看国内法定假期补班调休等。"><a href="#无数用户钟爱-Apple-自带「提醒事项」和「日历」应用，用来管理日常日程确实很方便，尤其是对于使用苹果三件套的用户来说多设备之间无缝衔接同步更为便利。但也因其功能限制，招人吐槽。例如无法查看国内节假日（老版本系统），无法查看国内法定假期补班调休等。" class="headerlink" title="无数用户钟爱 Apple 自带「提醒事项」和「日历」应用，用来管理日常日程确实很方便，尤其是对于使用苹果三件套的用户来说多设备之间无缝衔接同步更为便利。但也因其功能限制，招人吐槽。例如无法查看国内节假日（老版本系统），无法查看国内法定假期补班调休等。"></a>无数用户钟爱 Apple 自带「提醒事项」和「日历」应用，用来管理日常日程确实很方便，尤其是对于使用苹果三件套的用户来说多设备之间无缝衔接同步更为便利。但也因其功能限制，招人吐槽。例如无法查看国内节假日（老版本系统），无法查看国内法定假期补班调休等。</h4></blockquote><p>#####</p><blockquote><h4 id="那么，如何在Mac-OSX-或者iOS系统自带日历软件中加入中国节假日以及法定假期补班调休日历？"><a href="#那么，如何在Mac-OSX-或者iOS系统自带日历软件中加入中国节假日以及法定假期补班调休日历？" class="headerlink" title="那么，如何在Mac OSX 或者iOS系统自带日历软件中加入中国节假日以及法定假期补班调休日历？"></a>那么，如何在Mac OSX 或者iOS系统自带日历软件中加入中国节假日以及法定假期补班调休日历？</h4></blockquote><h2 id="两种方式"><a href="#两种方式" class="headerlink" title="两种方式"></a><em>两种方式</em></h2><h4 id="1-订阅制"><a href="#1-订阅制" class="headerlink" title="1. 订阅制"></a>1. 订阅制</h4><ul><li>优点：一次订阅，终身使用。（当前前提是不删除订阅并且提供方一直更新日历信息）。</li><li>缺点：无法编辑订阅日历，只读模式。<h4 id="2-直接下载导入日历"><a href="#2-直接下载导入日历" class="headerlink" title="2. 直接下载导入日历"></a>2. 直接下载导入日历</h4></li><li>优点：可以后期自行编辑下载的日历信息。</li><li>缺点：日历订阅方更新日历信息后，用户无法实时更新日历信息，需要再次下载日历导入。</li></ul><blockquote><p>订阅制还有一个缺点就是，日历订阅提供方可以修改日历加入更多广告！这点用户可能无法避免，但是可以选择订阅的日历免提醒！当然我提供日历订阅只是为了方便大家，并非为了打广告！哈哈！</p></blockquote><h2 id="订阅或者导入日历方式"><a href="#订阅或者导入日历方式" class="headerlink" title="订阅或者导入日历方式"></a><em>订阅或者导入日历方式</em></h2><h5 id="订阅地址："><a href="#订阅地址：" class="headerlink" title="订阅地址："></a>订阅地址：</h5><h6 id="webcal-p10-calendars-icloud-com-published-2-MTI3Njk0MTQxNzEyNzY5NFRvxM53AOH-Px17vHeUETlZdUggoyEt2KnFiIqHg40FkRXfcQJjYoa2dULRarI9z4UlbHxK-kLOohfiRVSSP7Q"><a href="#webcal-p10-calendars-icloud-com-published-2-MTI3Njk0MTQxNzEyNzY5NFRvxM53AOH-Px17vHeUETlZdUggoyEt2KnFiIqHg40FkRXfcQJjYoa2dULRarI9z4UlbHxK-kLOohfiRVSSP7Q" class="headerlink" title="webcal://p10-calendars.icloud.com/published/2/MTI3Njk0MTQxNzEyNzY5NFRvxM53AOH-Px17vHeUETlZdUggoyEt2KnFiIqHg40FkRXfcQJjYoa2dULRarI9z4UlbHxK-kLOohfiRVSSP7Q"></a>webcal://p10-calendars.icloud.com/published/2/MTI3Njk0MTQxNzEyNzY5NFRvxM53AOH-Px17vHeUETlZdUggoyEt2KnFiIqHg40FkRXfcQJjYoa2dULRarI9z4UlbHxK-kLOohfiRVSSP7Q</h6><h5 id="下载日历ics文件地址："><a href="#下载日历ics文件地址：" class="headerlink" title="下载日历ics文件地址："></a>下载日历ics文件地址：</h5><h6 id="http-p10-calendars-icloud-com-published-2-MTI3Njk0MTQxNzEyNzY5NFRvxM53AOH-Px17vHeUETlZdUggoyEt2KnFiIqHg40FkRXfcQJjYoa2dULRarI9z4UlbHxK-kLOohfiRVSSP7Q"><a href="#http-p10-calendars-icloud-com-published-2-MTI3Njk0MTQxNzEyNzY5NFRvxM53AOH-Px17vHeUETlZdUggoyEt2KnFiIqHg40FkRXfcQJjYoa2dULRarI9z4UlbHxK-kLOohfiRVSSP7Q" class="headerlink" title="http://p10-calendars.icloud.com/published/2/MTI3Njk0MTQxNzEyNzY5NFRvxM53AOH-Px17vHeUETlZdUggoyEt2KnFiIqHg40FkRXfcQJjYoa2dULRarI9z4UlbHxK-kLOohfiRVSSP7Q"></a><a href="http://p10-calendars.icloud.com/published/2/MTI3Njk0MTQxNzEyNzY5NFRvxM53AOH-Px17vHeUETlZdUggoyEt2KnFiIqHg40FkRXfcQJjYoa2dULRarI9z4UlbHxK-kLOohfiRVSSP7Q" target="_blank" rel="noopener">http://p10-calendars.icloud.com/published/2/MTI3Njk0MTQxNzEyNzY5NFRvxM53AOH-Px17vHeUETlZdUggoyEt2KnFiIqHg40FkRXfcQJjYoa2dULRarI9z4UlbHxK-kLOohfiRVSSP7Q</a></h6><h4 id="订阅制"><a href="#订阅制" class="headerlink" title="订阅制"></a>订阅制</h4><h5 id="Mac-OSX"><a href="#Mac-OSX" class="headerlink" title="Mac OSX"></a>Mac OSX</h5><ul><li>复制上方订阅地址</li><li>打开Mac OSX 自带日历应用</li><li>点击左上角文件—新建日历订阅，将复制的订阅地址粘贴，点击订阅。</li><li>如下图，上面会有一些配置信息，可以做修改。例如可以选择自动刷新频率（意思就是如果日历有修改，你多久更新一次）；还有可以忽略日历提醒。（不懂的话可以@我帮大家说明）。</li><li>点击“好”之后即可订阅成功，在日历中即可看到刚才订阅的日历。</li><li>如果要取消订阅，在左边日历列表栏中选中订阅的日历，右键—取消订阅。也可修改配置或者将订阅地址URL拷贝共享给更多朋友。<br>#####<br><img src="https://upload-images.jianshu.io/upload_images/1424124-c3b8eb9441d09d4a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1"></li></ul><h5 id="iOS"><a href="#iOS" class="headerlink" title="iOS"></a>iOS</h5><ul><li>和Mac OSX不同的是，iOS系统日历软件中没有直接提供订阅日历的入口（或者我没找到，有谁找到了可以@我修改一下文章），所以这里借助备忘录实现订阅功能。</li><li>新建一备忘录，将订阅地址复制粘贴到备忘录中，点击右上角完成。然后点击订阅地址，会弹框“是否订阅日历“法定节假””，点击订阅，会提示“已添加日历“法定节假日””，然后点击显示日程即可查看订阅日历。</li><li>也可以直接复制订阅地址到Safari中直接打开（必须且Safari），同样多的操作步骤，即可订阅！</li><li>如果使用Mac和iOS同步日历的用户，可以直接通过Mac订阅且位置选择iCloud，即可同步到订阅日历到iOS设备，也很便利。<br>##### </li></ul><h4 id="直接下载导入日历"><a href="#直接下载导入日历" class="headerlink" title="直接下载导入日历"></a>直接下载导入日历</h4><h5 id="Mac-OSX-1"><a href="#Mac-OSX-1" class="headerlink" title="Mac OSX"></a>Mac OSX</h5><ul><li>浏览器访问下载日历ics文件地址即可下载日历ics文件，双击导入。选择一个目录加入即可。</li></ul><h5 id="iOS-1"><a href="#iOS-1" class="headerlink" title="iOS"></a>iOS</h5><ul><li>备忘录或者Safari打开下载日历ics文件地址链接</li><li>提示如下图，点击右上角“添加全部”即可导入日历，或者点击某一项日程，可以单独添加某一项日程到日历应用中。</li></ul><p>######<br><img src="https://upload-images.jianshu.io/upload_images/1424124-e9d9c0fb97df2100.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2"></p><h2 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h2><ul><li>目前已更新支持2019国家法定假期。</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;h4 id=&quot;无数用户钟爱-Apple-自带「提醒事项」和「日历」应用，用来管理日常日程确实很方便，尤其是对于使用苹果三件套的用户来说多设备之间无缝衔接同步更为便利。但也因其功能限制，招人吐槽。例如无法查看国内节假日（老版本系统），无法查看国内法定假期
      
    
    </summary>
    
      <category term="Mac" scheme="http://yoursite.com/categories/Mac/"/>
    
    
      <category term="Mac技巧" scheme="http://yoursite.com/tags/Mac%E6%8A%80%E5%B7%A7/"/>
    
      <category term="Mac日历" scheme="http://yoursite.com/tags/Mac%E6%97%A5%E5%8E%86/"/>
    
      <category term="iPhone日历" scheme="http://yoursite.com/tags/iPhone%E6%97%A5%E5%8E%86/"/>
    
      <category term="日历" scheme="http://yoursite.com/tags/%E6%97%A5%E5%8E%86/"/>
    
      <category term="共享" scheme="http://yoursite.com/tags/%E5%85%B1%E4%BA%AB/"/>
    
  </entry>
  
  <entry>
    <title>iOS FaceID &amp; TouchID</title>
    <link href="http://yoursite.com/2017/11/09/iOS%20FaceID&amp;TouchID/"/>
    <id>http://yoursite.com/2017/11/09/iOS FaceID&amp;TouchID/</id>
    <published>2017-11-08T16:00:00.000Z</published>
    <updated>2019-07-24T10:24:46.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="iOS-FaceID-amp-TouchID"><a href="#iOS-FaceID-amp-TouchID" class="headerlink" title="iOS FaceID &amp; TouchID"></a>iOS FaceID &amp; TouchID</h2><h5 id="API文档-System-LocalAuthentication"><a href="#API文档-System-LocalAuthentication" class="headerlink" title="API文档 System/LocalAuthentication"></a>API文档 <a href="https://developer.apple.com/documentation/localauthentication?language=objc" target="_blank" rel="noopener">System/LocalAuthentication</a></h5><h4 id="FaceID和TouchID本身基本逻辑很简单（当然需要置入一些安全相关的第三方SDK的情况下除外），先来介绍几个关键参数值和一些主意事项，然后直接贴代码就OK"><a href="#FaceID和TouchID本身基本逻辑很简单（当然需要置入一些安全相关的第三方SDK的情况下除外），先来介绍几个关键参数值和一些主意事项，然后直接贴代码就OK" class="headerlink" title="FaceID和TouchID本身基本逻辑很简单（当然需要置入一些安全相关的第三方SDK的情况下除外），先来介绍几个关键参数值和一些主意事项，然后直接贴代码就OK"></a>FaceID和TouchID本身基本逻辑很简单（当然需要置入一些安全相关的第三方SDK的情况下除外），先来介绍几个关键参数值和一些主意事项，然后直接贴代码就OK</h4><h6 id="LAPolicyDeviceOwnerAuthenticationWithBiometrics-和-LAPolicyDeviceOwnerAuthentication"><a href="#LAPolicyDeviceOwnerAuthenticationWithBiometrics-和-LAPolicyDeviceOwnerAuthentication" class="headerlink" title="LAPolicyDeviceOwnerAuthenticationWithBiometrics 和 LAPolicyDeviceOwnerAuthentication"></a>LAPolicyDeviceOwnerAuthenticationWithBiometrics 和 LAPolicyDeviceOwnerAuthentication</h6><ul><li>LAPolicyDeviceOwnerAuthenticationWithBiometrics<ul><li>iOS 8.0+</li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 设备所有者使用生物识别方法进行认证。TouchID验证是必须的，如果TouchID不可用或者没有注册，则策略评估将会失败。如果TouchID是锁被锁定，则需要输入密码作为解锁TouchID的第一步。</span><br><span class="line">// TouchID对话框包括一个取消按钮，默认标题为“取消”，可以使用“localizedCancelTitle”属性去修改。有一个fallback按钮默认标题为“输入密码”，可以通过“localizedFallbackTitle”属性去修改。</span><br><span class="line">// fallback按钮最初是隐藏的，并且在首次touchID尝试失败之后显示。</span><br><span class="line">// 点击取消按钮或者输入密码按钮后会导致 evaluatePolicy: 方法调用失败，返回一个不同的错误代码。</span><br><span class="line">// 5次验证失败，生物识别将被锁定。之后，用户必须输入密码才可以解锁验证。</span><br></pre></td></tr></table></figure><ul><li>LAPolicyDeviceOwnerAuthentication<ul><li>iOS 9.0+</li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 设备所有者使用生物识别后者设备密码进行验证。</span><br><span class="line">// TouchID或者密码验证是必须的，如果TouchID可用，注册并且未被锁定，首先使用TouchID验证。否则直接要求输入设备密码。</span><br><span class="line">// 如果密码未被启用，则策略评估失败。</span><br><span class="line">// Touch ID身份验证对话框的行为与LAPolicyDeviceOwnerAuthenticationWithBiometrics使用的行为相似。当点击输入密码按钮的时候，切换验证方法，并允许用户输入设备密码。</span><br><span class="line">// 密码锁定会在6次失败尝试之后被锁定，并且逐步增加退避延迟。</span><br></pre></td></tr></table></figure><h6 id="iOS11新增属性-LABiometryType-biometryType"><a href="#iOS11新增属性-LABiometryType-biometryType" class="headerlink" title="iOS11新增属性 LABiometryType biometryType"></a>iOS11新增属性 LABiometryType biometryType</h6><ul><li>iOS 11.0+</li><li>这里需要注意的是请仔细阅读 biometryType 属性的注释。中文意思为只有当canEvaluatePolicy:生物识别策略成功之后才会去设置这个属性的值。简单来说意思就是 biometryType 这个属性的值只有在你调用canEvaluatePolicy:方法之后并且返回是YES没有错误的情况下才会设置，才会有值。在调用 canEvaluatePolicy: 方法前，或者调用后但是有Error的情况下，该属性均无任何有意义的值，验证之后实际为空。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">typedef NS_ENUM(NSInteger, LABiometryType)</span><br><span class="line">&#123;</span><br><span class="line">    /// The device does not support biometry.</span><br><span class="line">    LABiometryNone,</span><br><span class="line">    </span><br><span class="line">    /// The device supports Touch ID.</span><br><span class="line">    LABiometryTypeTouchID,</span><br><span class="line">    </span><br><span class="line">    /// The device supports Face ID.</span><br><span class="line">    LABiometryTypeFaceID,</span><br><span class="line">&#125; NS_ENUM_AVAILABLE(NA, 11_0) __WATCHOS_UNAVAILABLE __TVOS_UNAVAILABLE;</span><br><span class="line"></span><br><span class="line">/// Indicates the type of the biometry supported by the device.</span><br><span class="line">///</span><br><span class="line">/// @discussion  This property is set only when canEvaluatePolicy succeeds for a biometric policy.</span><br><span class="line">///              The default value is LABiometryNone.</span><br><span class="line">@property (nonatomic, readonly) LABiometryType biometryType NS_AVAILABLE(NA, 11_0) __WATCHOS_UNAVAILABLE __TVOS_UNAVAILABLE;</span><br></pre></td></tr></table></figure><h4 id="代码附上"><a href="#代码附上" class="headerlink" title="代码附上"></a>代码附上</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    // Do any additional setup after loading the view, typically from a nib.</span><br><span class="line">    </span><br><span class="line">    // 检测设备是否支持TouchID或者FaceID</span><br><span class="line">    if (@available(iOS 8.0, *)) &#123;</span><br><span class="line">        self.LAContent = [[LAContext alloc] init];</span><br><span class="line">        </span><br><span class="line">        NSError *authError = nil;</span><br><span class="line">        BOOL isCanEvaluatePolicy = [self.LAContent canEvaluatePolicy:LAPolicyDeviceOwnerAuthenticationWithBiometrics error:&amp;authError];</span><br><span class="line">        </span><br><span class="line">        if (authError) &#123;</span><br><span class="line">            NSLog(@&quot;检测设备是否支持TouchID或者FaceID失败！\n error : == %@&quot;,authError.localizedDescription);</span><br><span class="line">            [self showAlertView:[NSString stringWithFormat:@&quot;检测设备是否支持TouchID或者FaceID失败。\n errorCode : %ld\n errorMsg : %@&quot;,(long)authError.code, authError.localizedDescription]];</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            if (isCanEvaluatePolicy) &#123;</span><br><span class="line">                // 判断设备支持TouchID还是FaceID</span><br><span class="line">                if (@available(iOS 11.0, *)) &#123;</span><br><span class="line">                    switch (self.LAContent.biometryType) &#123;</span><br><span class="line">                        case LABiometryNone:</span><br><span class="line">                        &#123;</span><br><span class="line">                            [self justSupportBiometricsType:0];</span><br><span class="line">                        &#125;</span><br><span class="line">                            break;</span><br><span class="line">                        case LABiometryTypeTouchID:</span><br><span class="line">                        &#123;</span><br><span class="line">                            [self justSupportBiometricsType:1];</span><br><span class="line">                        &#125;</span><br><span class="line">                            break;</span><br><span class="line">                        case LABiometryTypeFaceID:</span><br><span class="line">                        &#123;</span><br><span class="line">                            [self justSupportBiometricsType:2];</span><br><span class="line">                        &#125;</span><br><span class="line">                            break;</span><br><span class="line">                        default:</span><br><span class="line">                            break;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    // Fallback on earlier versions</span><br><span class="line">                    NSLog(@&quot;iOS 11之前不需要判断 biometryType&quot;);</span><br><span class="line">                    // 因为iPhoneX起始系统版本都已经是iOS11.0，所以iOS11.0系统版本下不需要再去判断是否支持faceID，直接走支持TouchID逻辑即可。</span><br><span class="line">                    [self justSupportBiometricsType:1];</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                [self justSupportBiometricsType:0];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        // Fallback on earlier versions</span><br><span class="line">        [self justSupportBiometricsType:0];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark -</span><br><span class="line">#pragma mark -------------------- private actions --------------------</span><br><span class="line">// 开始验证按钮点击事件</span><br><span class="line">- (IBAction)didClickBtnCheck:(id)sender &#123;</span><br><span class="line">    NSString *myLocalizedReasonString = @&quot;验证&quot;;</span><br><span class="line">    </span><br><span class="line">    [self.LAContent evaluatePolicy:LAPolicyDeviceOwnerAuthenticationWithBiometrics localizedReason:myLocalizedReasonString reply:^(BOOL success, NSError * _Nullable error) &#123;</span><br><span class="line">        if (success) &#123;</span><br><span class="line">            NSLog(@&quot;身份验证成功！&quot;);</span><br><span class="line">            [self showAlertView:@&quot;验证成功&quot;];</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            // 做特定的错误判断处理逻辑。</span><br><span class="line">            NSLog(@&quot;身份验证失败！ \nerrorCode : %ld, errorMsg : %@&quot;,(long)error.code, error.localizedDescription);</span><br><span class="line">            // error 参考 LAError.h</span><br><span class="line">            [self showAlertView:[NSString stringWithFormat:@&quot;身份验证失败！\nerrCode : %ld\nerrorMsg : %@&quot;,(long)error.code, error.localizedDescription]];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark -</span><br><span class="line">#pragma mark -------------------- common methods --------------------</span><br><span class="line">// 判断生物识别类型，更新UI</span><br><span class="line">- (void)justSupportBiometricsType:(NSInteger)biometryType</span><br><span class="line">&#123;</span><br><span class="line">    switch (biometryType) &#123;</span><br><span class="line">        case 0:</span><br><span class="line">        &#123;</span><br><span class="line">            NSLog(@&quot;该设备支持不支持FaceID和TouchID&quot;);</span><br><span class="line">            self.lblMsg.text = @&quot;该设备支持不支持FaceID和TouchID&quot;;</span><br><span class="line">            self.lblMsg.textColor = [UIColor redColor];</span><br><span class="line">            self.btnCheck.enabled = NO;</span><br><span class="line">        &#125;</span><br><span class="line">            break;</span><br><span class="line">        case 1:</span><br><span class="line">        &#123;</span><br><span class="line">            NSLog(@&quot;该设备支持TouchID&quot;);</span><br><span class="line">            self.lblMsg.text = @&quot;该设备支持Touch ID&quot;;</span><br><span class="line">            [self.btnCheck setTitle:@&quot;点击开始验证Touch ID&quot; forState:UIControlStateNormal];</span><br><span class="line">            self.btnCheck.enabled = YES;</span><br><span class="line">        &#125;</span><br><span class="line">            break;</span><br><span class="line">        case 2:</span><br><span class="line">        &#123;</span><br><span class="line">            NSLog(@&quot;该设备支持Face ID&quot;);</span><br><span class="line">            self.lblMsg.text = @&quot;该设备支持Face ID&quot;;</span><br><span class="line">            [self.btnCheck setTitle:@&quot;点击开始验证Face ID&quot; forState:UIControlStateNormal];</span><br><span class="line">            self.btnCheck.enabled = YES;</span><br><span class="line">        &#125;</span><br><span class="line">            break;</span><br><span class="line">        default:</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 弹框</span><br><span class="line">- (void)showAlertView:(NSString *)msg</span><br><span class="line">&#123;</span><br><span class="line">    NSLog(@&quot;%@&quot;,msg);</span><br><span class="line">    if (@available(iOS 8.0, *)) &#123;</span><br><span class="line">        UIAlertAction *okAction = [UIAlertAction actionWithTitle:@&quot;OK&quot; style:UIAlertActionStyleCancel handler:nil];</span><br><span class="line">        UIAlertController *alertController = [UIAlertController alertControllerWithTitle:nil message:msg preferredStyle:UIAlertControllerStyleAlert];</span><br><span class="line">        [alertController addAction:okAction];</span><br><span class="line">        [self presentViewController:alertController animated:YES completion:nil];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        // Fallback on earlier versions</span><br><span class="line">        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:nil message:msg delegate:nil cancelButtonTitle:@&quot;OK&quot; otherButtonTitles:nil, nil];</span><br><span class="line">        [alertView show];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="LAError"><a href="#LAError" class="headerlink" title="LAError"></a>LAError</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">typedef NS_ENUM(NSInteger, LAError)</span><br><span class="line">&#123;</span><br><span class="line">    //身份验证不成功，因为用户无法提供有效的凭据。</span><br><span class="line">    LAErrorAuthenticationFailed = kLAErrorAuthenticationFailed,</span><br><span class="line"></span><br><span class="line">    //认证被用户取消(例如了取消按钮)。</span><br><span class="line">    LAErrorUserCancel = kLAErrorUserCancel,</span><br><span class="line"></span><br><span class="line">    //认证被取消了,因为用户利用回退按钮(输入密码)。</span><br><span class="line">    LAErrorUserFallback = kLAErrorUserFallback,</span><br><span class="line"></span><br><span class="line">    //身份验证被系统取消了(如另一个应用程序去前台)。</span><br><span class="line">    LAErrorSystemCancel = kLAErrorSystemCancel,</span><br><span class="line"></span><br><span class="line">    //身份验证无法启动,因为设备没有设置密码。</span><br><span class="line">    LAErrorPasscodeNotSet = kLAErrorPasscodeNotSet,</span><br><span class="line"></span><br><span class="line">    //身份验证无法启动,因为触摸ID不可用在设备上。</span><br><span class="line">    LAErrorTouchIDNotAvailable NS_ENUM_DEPRECATED(10_10, 10_13, 8_0, 11_0, &quot;use LAErrorBiometryNotAvailable&quot;) = kLAErrorTouchIDNotAvailable,</span><br><span class="line"></span><br><span class="line">    //身份验证无法启动,因为没有登记的手指触摸ID。</span><br><span class="line">    LAErrorTouchIDNotEnrolled NS_ENUM_DEPRECATED(10_10, 10_13, 8_0, 11_0, &quot;use LAErrorBiometryNotEnrolled&quot;) = kLAErrorTouchIDNotEnrolled,</span><br><span class="line"></span><br><span class="line">    //验证不成功,因为有太多的失败的触摸ID尝试和触///摸现在ID是锁着的。</span><br><span class="line">    //解锁TouchID必须要使用密码，例如调用LAPolicyDeviceOwnerAuthenti//cationWithBiometrics的时候密码是必要条件。</span><br><span class="line">    //身份验证不成功，因为有太多失败的触摸ID尝试和触摸ID现在被锁定。</span><br><span class="line">    LAErrorTouchIDLockout NS_ENUM_DEPRECATED(10_11, 10_13, 9_0, 11_0, &quot;use LAErrorBiometryLockout&quot;)</span><br><span class="line">    __WATCHOS_DEPRECATED(3.0, 4.0, &quot;use LAErrorBiometryLockout&quot;) __TVOS_DEPRECATED(10.0, 11.0, &quot;use LAErrorBiometryLockout&quot;) = kLAErrorTouchIDLockout,</span><br><span class="line"></span><br><span class="line">    //应用程序取消了身份验证（例如在进行身份验证时调用了无效）。</span><br><span class="line">    LAErrorAppCancel NS_ENUM_AVAILABLE(10_11, 9_0) = kLAErrorAppCancel,</span><br><span class="line"></span><br><span class="line">    //LAContext传递给这个调用之前已经失效。</span><br><span class="line">    LAErrorInvalidContext NS_ENUM_AVAILABLE(10_11, 9_0) = kLAErrorInvalidContext,</span><br><span class="line"></span><br><span class="line">    //身份验证无法启动,因为生物识别验证在当前这个设备上不可用。</span><br><span class="line">    LAErrorBiometryNotAvailable NS_ENUM_AVAILABLE(10_13, 11_0) __WATCHOS_AVAILABLE(4.0) __TVOS_AVAILABLE(11.0) = kLAErrorBiometryNotAvailable,</span><br><span class="line"></span><br><span class="line">    //身份验证无法启动，因为生物识别没有录入信息。</span><br><span class="line">    LAErrorBiometryNotEnrolled NS_ENUM_AVAILABLE(10_13, 11_0) __WATCHOS_AVAILABLE(4.0) __TVOS_AVAILABLE(11.0) = kLAErrorBiometryNotEnrolled,</span><br><span class="line"></span><br><span class="line">    //身份验证不成功，因为太多次的验证失败并且生物识别验证是锁定状态。此时，必须输入密码才能解锁。例如LAPolicyDeviceOwnerAuthenticationWithBiometrics时候将密码作为先决条件。</span><br><span class="line">    LAErrorBiometryLockout NS_ENUM_AVAILABLE(10_13, 11_0) __WATCHOS_AVAILABLE(4.0) __TVOS_AVAILABLE(11.0) = kLAErrorBiometryLockout,</span><br><span class="line"></span><br><span class="line">    //身份验证失败。因为这需要显示UI已禁止使用interactionNotAllowed属性。  据说是beta版本</span><br><span class="line">    LAErrorNotInteractive API_AVAILABLE(macos(10.10), ios(8.0), watchos(3.0), tvos(10.0)) = kLAErrorNotInteractive,</span><br><span class="line">&#125; NS_ENUM_AVAILABLE(10_10, 8_0) __WATCHOS_AVAILABLE(3.0) __TVOS_AVAILABLE(10.0);</span><br></pre></td></tr></table></figure><hr><h3 id="Info"><a href="#Info" class="headerlink" title="Info"></a>Info</h3><ul><li>Github: <a href="https://github.com/EchoZuo" target="_blank" rel="noopener">https://github.com/EchoZuo</a></li><li>jianshu: <a href="https://www.jianshu.com/u/3390ce71084e" target="_blank" rel="noopener">https://www.jianshu.com/u/3390ce71084e</a></li><li>CSDN: <a href="https://blog.csdn.net/zuoqianheng" target="_blank" rel="noopener">https://blog.csdn.net/zuoqianheng</a></li><li>Email: <a href="mailto:zuoqianheng@foxmail.com" target="_blank" rel="noopener">zuoqianheng@foxmail.com</a></li><li>Telegram: @echozuo</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;iOS-FaceID-amp-TouchID&quot;&gt;&lt;a href=&quot;#iOS-FaceID-amp-TouchID&quot; class=&quot;headerlink&quot; title=&quot;iOS FaceID &amp;amp; TouchID&quot;&gt;&lt;/a&gt;iOS FaceID &amp;amp; T
      
    
    </summary>
    
      <category term="iOS Dev" scheme="http://yoursite.com/categories/iOS-Dev/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
      <category term="FaceID" scheme="http://yoursite.com/tags/FaceID/"/>
    
      <category term="TouchID" scheme="http://yoursite.com/tags/TouchID/"/>
    
  </entry>
  
  <entry>
    <title>iOS11 Core NFC</title>
    <link href="http://yoursite.com/2017/08/22/iOS11CoreNFC/"/>
    <id>http://yoursite.com/2017/08/22/iOS11CoreNFC/</id>
    <published>2017-08-21T16:00:00.000Z</published>
    <updated>2019-07-24T10:22:53.000Z</updated>
    
    <content type="html"><![CDATA[<hr><h3 id="About-Core-NFC"><a href="#About-Core-NFC" class="headerlink" title="About Core NFC"></a>About Core NFC</h3><h5 id="Core-NFC支持的读取数据类型："><a href="#Core-NFC支持的读取数据类型：" class="headerlink" title="Core NFC支持的读取数据类型："></a>Core NFC支持的读取数据类型：</h5><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2017-08-22/1.png" alt="1.png"></p><h5 id="Core-NFC框架特性-要求"><a href="#Core-NFC框架特性-要求" class="headerlink" title="Core NFC框架特性/要求"></a>Core NFC框架特性/要求</h5><ul><li>目前支持NFC Tags（标签）的读取</li><li>不支持输出和格式设置</li><li>仅支持iphone 7 &amp; iphone 7plus，且iOS11系统</li></ul><hr><h3 id="项目加入Core-NFC框架使用的要求"><a href="#项目加入Core-NFC框架使用的要求" class="headerlink" title="项目加入Core NFC框架使用的要求"></a>项目加入Core NFC框架使用的要求</h3><ul><li>（必须）支持iOS11，且只有iOS11和iphone7/plus机型才可以</li><li>（必须）像Apple pay或者Push Notification一样，需要添加一个entitlement</li><li>（保修）在plist文件中添加Privacy - NFC Scan Usage Description。这里使用的描述信息会显示在读取界面中</li></ul><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2017-08-22/2.png" alt="2.png"></p><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2017-08-22/3.png" alt="3.png"></p><h5 id="集成Core-NFC中的一些细节说明"><a href="#集成Core-NFC中的一些细节说明" class="headerlink" title="集成Core NFC中的一些细节说明"></a>集成Core NFC中的一些细节说明</h5><ul><li>设备读取标签是一个被动的过程，所以需要程序主动发起一个会话即为session去读取标签。与处理摄像头相关功能类似，所有的操作都必须建立在session基础之上</li><li>程序必须始终保持前台运行并且识别界面可视。如果至于后台session会自动终止，读取失败。<ul><li>Tips：这里我做过一个测试，实际上当Core NCF读取标签界面出现后，无法下拉通知栏中心，也无法上滑出现控制中心，如果识别过程中，点击home第一次会取消识别，不会直接进入主屏幕。这样的设计应该是为了防止在识别过程中出现误操作等情况的发生</li></ul></li><li>读取标签被限制的60秒之内。意思就是60秒内标签必须识别完成，否则session会自动终止。如果会话过期或者未经过验证，则你的程序需要重新去建立新的会话</li><li>Core NFC可以设置会话读取一个标签或者多个标签。在读取单个标签的时候，读取完成后，会话自动终止。如果读取多个标签，会话会一直持续直到程序主动终止会话或者60秒后。60秒是一个最大的节点</li></ul><hr><h3 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h3><h6 id="代码很简单！！！其实Core-NFC目前放出的权限很少，只支持特定格式的NFC数据读取，不支持输出和格式设置，所以代码上很简单，可以说是傻瓜式的调用处理即可。我猜想可能是因为Apple为了保证Apple-Pay的安全性，毕竟Apple-Pay也是采用NFC完成支付。"><a href="#代码很简单！！！其实Core-NFC目前放出的权限很少，只支持特定格式的NFC数据读取，不支持输出和格式设置，所以代码上很简单，可以说是傻瓜式的调用处理即可。我猜想可能是因为Apple为了保证Apple-Pay的安全性，毕竟Apple-Pay也是采用NFC完成支付。" class="headerlink" title="代码很简单！！！其实Core NFC目前放出的权限很少，只支持特定格式的NFC数据读取，不支持输出和格式设置，所以代码上很简单，可以说是傻瓜式的调用处理即可。我猜想可能是因为Apple为了保证Apple Pay的安全性，毕竟Apple Pay也是采用NFC完成支付。"></a>代码很简单！！！其实Core NFC目前放出的权限很少，只支持特定格式的NFC数据读取，不支持输出和格式设置，所以代码上很简单，可以说是傻瓜式的调用处理即可。我猜想可能是因为Apple为了保证Apple Pay的安全性，毕竟Apple Pay也是采用NFC完成支付。</h6><h5 id="使用Core-NFC"><a href="#使用Core-NFC" class="headerlink" title="使用Core NFC"></a>使用Core NFC</h5><ul><li>@import CoreNFC 导入框架，这点没啥可说的</li><li>遵循 NFCNDEFReaderSessionDelegate 协议</li><li>创建 NFCNDEFReaderSession 实例</li><li>开启 NFCNDEFReaderSession 以及处理协议回调方法</li></ul><h5 id="具体代码如下如下"><a href="#具体代码如下如下" class="headerlink" title="具体代码如下如下"></a>具体代码如下如下</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">// @import CoreNFC 导入框架</span><br><span class="line">// 遵循 NFCNDEFReaderSessionDelegate 协议</span><br><span class="line">#import &quot;ViewController.h&quot;</span><br><span class="line">#include &lt;sys/types.h&gt;</span><br><span class="line">#include &lt;sys/sysctl.h&gt;</span><br><span class="line"></span><br><span class="line">@import CoreNFC;</span><br><span class="line">@interface ViewController ()&lt;NFCNDEFReaderSessionDelegate&gt;</span><br><span class="line">@end</span><br><span class="line">@implementation ViewController</span><br><span class="line"></span><br><span class="line">// 创建 NFCNDEFReaderSession 实例，开启NFCNDEFReaderSession</span><br><span class="line">// Tips：开启 </span><br><span class="line">// 条件：iphone7/7plus运行iOS11</span><br><span class="line">if ([ViewController isiPhone7oriPhone7Plus] &amp;&amp; [UIDevice currentDevice].systemVersion.floatValue &gt;= 11.0) &#123;</span><br><span class="line">    // ReadingAvailable is YES if device supports NFC tag reading.</span><br><span class="line">    if ([NFCNDEFReaderSession readingAvailable]) &#123;</span><br><span class="line">        // beginScanning</span><br><span class="line">        // invalidateAfterFirstRead 属性表示是否需要识别多个NFC标签，如果是YES，则会话会在第一次识别成功后终止。否则会话会持续</span><br><span class="line">        // 不过有一种例外情况，就是如果响应了-readerSession:didInvalidateWithError:方法，则是否为YES，会话都会被终止</span><br><span class="line">        NFCNDEFReaderSession *session = [[NFCNDEFReaderSession alloc] initWithDelegate:self queue:nil invalidateAfterFirstRead:YES];</span><br><span class="line">        </span><br><span class="line">        [session beginSession];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 处理协议回调方法</span><br><span class="line">#pragma mark - NFCReaderSessionDelegate</span><br><span class="line">// Check invalidation reason from the returned error. A new session instance is required to read new tags.</span><br><span class="line">// 识别出现Error后会话会自动终止，此时就需要程序重新开启会话</span><br><span class="line">- (void)readerSession:(NFCNDEFReaderSession *)session didInvalidateWithError:(NSError *)error &#123;</span><br><span class="line">    // error明细参考NFCError.h</span><br><span class="line">    NSLog(@&quot;%@&quot;,error);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Process detected NFCNDEFMessage objects</span><br><span class="line">- (void)readerSession:(NFCNDEFReaderSession *)session didDetectNDEFs:(NSArray&lt;NFCNDEFMessage *&gt; *)messages &#123;</span><br><span class="line">    // 数组messages中是NFCNDEFMessage对象</span><br><span class="line">    // NFCNDEFMessage对象中有一个records数组，这个数组中是NFCNDEFPayload对象</span><br><span class="line">    // 参考NFCNDEFMessage、NFCNDEFPayload类</span><br><span class="line">    // 解析数据</span><br><span class="line">    for (NFCNDEFMessage *message in messages) &#123;</span><br><span class="line">        for (NFCNDEFPayload *playLoad in message.records) &#123;</span><br><span class="line">            NSLog(@&quot;typeNameFormat : %d&quot;, playLoad.typeNameFormat);</span><br><span class="line">            NSLog(@&quot;type : %@&quot;, playLoad.type);</span><br><span class="line">            NSLog(@&quot;identifier : %@&quot;, playLoad.identifier);</span><br><span class="line">            NSLog(@&quot;playload : %@&quot;, playLoad.payload);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 主动终止会话，调用如下方法即可。</span><br><span class="line">[session invalidateSession];</span><br></pre></td></tr></table></figure><h5 id="运行效果图"><a href="#运行效果图" class="headerlink" title="运行效果图"></a>运行效果图</h5><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2017-08-22/4.png" alt="4.png"></p><p><img src="https://echozuo-github-io.oss-cn-shanghai.aliyuncs.com/blog-hexo/2017-08-22/5.png" alt="5.png"></p><h6 id="由于身边的NFC卡片都未识别成功，所以图二识别完成后的截图为WWDC视频中的截图。"><a href="#由于身边的NFC卡片都未识别成功，所以图二识别完成后的截图为WWDC视频中的截图。" class="headerlink" title="由于身边的NFC卡片都未识别成功，所以图二识别完成后的截图为WWDC视频中的截图。"></a>由于身边的NFC卡片都未识别成功，所以图二识别完成后的截图为WWDC视频中的截图。</h6><h6 id="通过测试，目前用iphone7plus-iOS11测试读取上海交通卡、公司门禁卡，都没有读取成功，代码逻辑应该没有问题。可能是这些NFC芯片数据格式问题？不太确定是什么原因。不过貌似网上有人说是iOS11的问题，可以等iOS11正式版发布后再试试看，我也会持续关注。如果大家有相关的答案也可以告知我。谢谢。"><a href="#通过测试，目前用iphone7plus-iOS11测试读取上海交通卡、公司门禁卡，都没有读取成功，代码逻辑应该没有问题。可能是这些NFC芯片数据格式问题？不太确定是什么原因。不过貌似网上有人说是iOS11的问题，可以等iOS11正式版发布后再试试看，我也会持续关注。如果大家有相关的答案也可以告知我。谢谢。" class="headerlink" title="通过测试，目前用iphone7plus+iOS11测试读取上海交通卡、公司门禁卡，都没有读取成功，代码逻辑应该没有问题。可能是这些NFC芯片数据格式问题？不太确定是什么原因。不过貌似网上有人说是iOS11的问题，可以等iOS11正式版发布后再试试看，我也会持续关注。如果大家有相关的答案也可以告知我。谢谢。"></a>通过测试，目前用iphone7plus+iOS11测试读取上海交通卡、公司门禁卡，都没有读取成功，代码逻辑应该没有问题。可能是这些NFC芯片数据格式问题？不太确定是什么原因。不过貌似网上有人说是iOS11的问题，可以等iOS11正式版发布后再试试看，我也会持续关注。如果大家有相关的答案也可以告知我。谢谢。</h6><h3 id="资料"><a href="#资料" class="headerlink" title="资料"></a>资料</h3><blockquote><p><a href="https://github.com/EchoZuo/iOSCoreNFC" target="_blank" rel="noopener">https://github.com/EchoZuo/iOSCoreNFC</a><br><a href="https://developer.apple.com/documentation/corenfc#overview" target="_blank" rel="noopener">https://developer.apple.com/documentation/corenfc#overview</a><br><a href="https://developer.apple.com/videos/play/wwdc2017/718/" target="_blank" rel="noopener">https://developer.apple.com/videos/play/wwdc2017/718/</a><br><a href="https://stackoverflow.com/questions/44380305/ios-11-core-nfc-any-sample-code" target="_blank" rel="noopener">https://stackoverflow.com/questions/44380305/ios-11-core-nfc-any-sample-code</a> </p></blockquote><hr><h3 id="Info"><a href="#Info" class="headerlink" title="Info"></a>Info</h3><ul><li>Github: <a href="https://github.com/EchoZuo" target="_blank" rel="noopener">https://github.com/EchoZuo</a></li><li>jianshu: <a href="https://www.jianshu.com/u/3390ce71084e" target="_blank" rel="noopener">https://www.jianshu.com/u/3390ce71084e</a></li><li>CSDN: <a href="https://blog.csdn.net/zuoqianheng" target="_blank" rel="noopener">https://blog.csdn.net/zuoqianheng</a></li><li>Email: <a href="mailto:zuoqianheng@foxmail.com" target="_blank" rel="noopener">zuoqianheng@foxmail.com</a></li><li>Telegram: @echozuo</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;hr&gt;
&lt;h3 id=&quot;About-Core-NFC&quot;&gt;&lt;a href=&quot;#About-Core-NFC&quot; class=&quot;headerlink&quot; title=&quot;About Core NFC&quot;&gt;&lt;/a&gt;About Core NFC&lt;/h3&gt;&lt;h5 id=&quot;Core-NFC支持的读
      
    
    </summary>
    
      <category term="iOS Dev" scheme="http://yoursite.com/categories/iOS-Dev/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
      <category term="CoreNFC" scheme="http://yoursite.com/tags/CoreNFC/"/>
    
      <category term="NFC" scheme="http://yoursite.com/tags/NFC/"/>
    
  </entry>
  
  <entry>
    <title>Mac终端常用命令集合</title>
    <link href="http://yoursite.com/2017/04/25/Mac%E7%BB%88%E7%AB%AF%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E9%9B%86%E5%90%88/"/>
    <id>http://yoursite.com/2017/04/25/Mac终端常用命令集合/</id>
    <published>2017-04-24T16:00:00.000Z</published>
    <updated>2019-07-19T11:01:31.000Z</updated>
    
    <content type="html"><![CDATA[<hr><h3 id="Mac-终端常用命令集合"><a href="#Mac-终端常用命令集合" class="headerlink" title="Mac 终端常用命令集合"></a>Mac 终端常用命令集合</h3><ul><li><code>pwd</code> ：显示当前路径</li><li><code>cd dst_dir</code> ：跳转到不同路径下，可以用相对路径，也可以用绝对路径</li><li><code>cd..</code> ：跳转到上级路径</li><li><code>cd../..</code> ：跳转到上上级路径</li><li><code>cd</code> ：跳转到当前用户的家目录</li><li><code>cd ~</code> ：跳转到用户的家目录</li><li><code>ls</code> ：列出当前路径下所有文件和文件夹</li><li><code>ls -l</code> ：列出当前路径下所有文件和文件夹的详细信息</li><li><code>ls -a</code> ：列出当前路径下的所有文件和文件夹，包括隐藏文件和隐藏文件夹，以及.和..</li><li><code>ls -lh</code> ：将文件的大小已k、m、g这样的大小单位来显示</li></ul><blockquote><p><code>ls -lh</code>后的信息说明 ：<code>d</code>开头的是文件夹，<code>l</code>开头的是链接文件，即文件的符号链接；其他文件都是-；<code>rwx</code>：可读可写可执行；<code>rw-r--r--</code>：<code>rw</code>是创建者权限，<code>r</code>是同一个组的用户的权限，最后的r是普通用户的权限。</p></blockquote><ul><li><code>touch file_name</code> ：在当前路径下新建一个文件，这个文件的文件名就是file_name</li><li><code>touch /Users/echozuo/test/new_file</code> ：表示用绝对路径和文件名在其他路径下新建文件</li><li><code>touch file1 file2 file3</code> ：新建多个文件</li><li><code>mkdir new_dir</code> ：在当前路径下新建一个文件夹new_dir</li><li><code>mkdir /Users/echozuo/test/new_dir</code> ：用绝对路径新建一个文件夹</li><li><code>mkdir ../test/new_dir</code> ：用相对路径新建文件夹</li><li><code>mkdir dir1 dir2 dir3</code> ：新建多个文件夹</li><li><code>rm file_name</code> ：删除一个文件</li><li><code>rm file1 file2 file3</code> ：删除多个文件</li><li><code>rm -r dir1</code> ：删除一个文件夹</li><li><code>rm -r dir1 dir2 dir3</code> ：删除多个文件夹</li><li><code>cp src_file new_dir</code> ：将源文件（src_file）复制一份放到其他的文件夹（new_dir）下边</li><li><code>cp src_file new_dir/newname</code> ：将源文件（src_file）复制一份放到其他的文件夹（new_dir）下边，并重新命名文件名为newname</li><li><code>mv src_file new_dir</code> ：将源文件剪切到其他文件夹下边</li><li><code>mv scr_file new_dir/newname</code> ：将源文件剪切到其他文件夹下边并重新命名文件</li><li><code>man 命令名</code> ：表示查看这个命令的手册，例如：<ul><li><code>man cd</code></li><li><code>man mkdir</code></li><li><code>man touch</code></li></ul></li><li><code>ifconfig</code> ：查看各个网卡的状态</li><li><code>ping ip</code> ：看从本机到这个ip的网络通不通</li><li><code>route ip</code> ：看从本机到这个ip的路由节点有哪些</li></ul><hr><h3 id="VIM常用命令"><a href="#VIM常用命令" class="headerlink" title="VIM常用命令"></a>VIM常用命令</h3><h5 id="vim-是一个终端下的文本编译器。"><a href="#vim-是一个终端下的文本编译器。" class="headerlink" title="vim 是一个终端下的文本编译器。"></a><a href="http://baike.baidu.com/link?url=UDWy9lybmwVdSbj-Yf3W7tiGLupHcmTRDSebA_F8bDbo8CLy0--r_dAVRWpF8-Bj0wEskQGGA-mRurcBUYDZ8_" target="_blank" rel="noopener">vim</a> 是一个终端下的文本编译器。</h5><h5 id="vim操作分为一般命令模式和编辑模式。"><a href="#vim操作分为一般命令模式和编辑模式。" class="headerlink" title="vim操作分为一般命令模式和编辑模式。"></a>vim操作分为一般命令模式和编辑模式。</h5><ul><li><code>vim file_name</code> ：会进入到一般命令模式下。如果路径下没有该文件，则会自动创建，但是在退出一般命令模式的时候，需要保存，否则首次创建的文件不会自动保存。</li><li>一般命令模式下能进行的操作有（常用操作）：<ul><li><code>i</code>或者<code>a</code>或者<code>o</code> ：可以进入编辑模式</li><li><code>:w</code> ：保存编辑后的文件内容</li><li><code>:q</code> ：退出vim</li><li><code>:wq</code> ：保存并退出</li><li><code>:q!</code> ：不保存并退出</li><li><code>:w!</code> ：强制保存</li><li><code>h</code>、<code>j</code>、<code>k</code>、<code>l</code> ：分别代表光标向左、向下、向上、向右移动</li><li><code>dd</code> ：删除光标所在行</li><li><code>ndd</code> ：删除光标所在行开始的n行。例如<code>4dd</code>表示删除光标所在行开始的4行</li><li><code>u</code> ：撤回上一步的行为（操作）</li><li><code>yy</code> ：复制光标所在的行</li><li><code>yy n</code> ：赋值光标所在行开始的n行</li><li><code>p</code> ：粘贴在光标所在行的下一行位置</li><li><code>v</code> ：进入可视模式，进入可视模式后可以用hjkl来移动光标选中文字</li><li><code>:set nu</code> ：设置显示行号，同<code>:set number</code></li><li><code>:set nonu</code> ：设置取消显示行号，同<code>:set nonumber</code></li><li><code>:n</code> ：将光标定位在第几行</li><li><code>control + f</code> ：往下翻页</li><li><code>control + b</code> ：往上翻页</li><li><code>gg</code> ：光标回调文件顶部</li><li><code>shift + g</code> ：光标回调文件末行</li><li><code>/string</code> ：表示在当前文件里从头部开始查找string</li><li><code>?string</code> ：表示在当前文件里从尾部查找string</li><li><code>shift + 4</code> ：将光标定位所在行的末尾</li><li><code>shift + i</code> ：将光标定位在所在行的行首</li></ul></li><li>编辑模式下可以进行的操作有：<ol><li>可以编辑文件</li><li>按ESC退回到一般命令模式</li></ol></li></ul><hr><h3 id="补充终端命令"><a href="#补充终端命令" class="headerlink" title="补充终端命令"></a>补充终端命令</h3><ul><li><code>tar -cvf pakage.tar file1 file2 file3</code> ：表示将file1，file2，file3这三个文件打成一个压缩包pakage.tar</li><li><code>tar -cvf pakage.tar dir</code> ：表示将目录dir及该目录下的所有文件和文件打成一个包</li><li><code>tar -xcf pakage.tar</code> ：将压缩包pakage.tar解压到当路径下</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;hr&gt;
&lt;h3 id=&quot;Mac-终端常用命令集合&quot;&gt;&lt;a href=&quot;#Mac-终端常用命令集合&quot; class=&quot;headerlink&quot; title=&quot;Mac 终端常用命令集合&quot;&gt;&lt;/a&gt;Mac 终端常用命令集合&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;pwd&lt;/code&gt; ：显
      
    
    </summary>
    
      <category term="macOS" scheme="http://yoursite.com/categories/macOS/"/>
    
    
      <category term="Mac" scheme="http://yoursite.com/tags/Mac/"/>
    
      <category term="macOS" scheme="http://yoursite.com/tags/macOS/"/>
    
      <category term="终端" scheme="http://yoursite.com/tags/%E7%BB%88%E7%AB%AF/"/>
    
      <category term="命令" scheme="http://yoursite.com/tags/%E5%91%BD%E4%BB%A4/"/>
    
      <category term="Linux" scheme="http://yoursite.com/tags/Linux/"/>
    
  </entry>
  
</feed>
